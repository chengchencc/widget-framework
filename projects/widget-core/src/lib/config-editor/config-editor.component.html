
<div class="ul-prop">
  <ng-container *ngFor="let prop of propList" >
    <!-- 普通 style prop，直接显示 -->
    <div *ngIf="!prop.ifShow"
      class="form-group li-prop row">
      <!-- 3-9 结构 -->
      <ng-container>
        <div class='col-sm-3'>
        <!-- TODO: 有点冗余咋整 -->
        <!-- normal label -->
        <label *ngIf="prop.type!=StylePropType.Number && prop.type!=StylePropType.ScopedNumberWithoutUnit"
          class='prop-name'
          [tooltip]="prop.tip || prop.name"
          [delay]="500"
          [class.changed]="isPropInItemConfig(prop.name)"
          [for]="prop.name">{{camel2Joiner(prop.name, ' ')}}</label>
        <!-- drag input label -->
        <label *ngIf="prop.type==StylePropType.Number || prop.type==StylePropType.ScopedNumberWithoutUnit"
          class='prop-name drag-input drag-input-x'
          libDragInput
          [modal]="getDisplayValue(prop.name)"
          (changeValue)="handleChangeValue($event, prop)"
          [tooltip]="prop.tip || prop.name"
          [delay]="500"
          [class.changed]="isPropInItemConfig(prop.name)"
          [for]="prop.name">{{camel2Joiner(prop.name, ' ')}}</label>
        </div>
        <div class=col-sm-9>
          <ng-container [ngSwitch]="prop.type">

            <select *ngSwitchCase='StylePropType.LongEnum'
              class="form-control form-control-sm"
              [name]="prop.name"
              [id]="prop.name"
              [ngModel]="getDisplayValue(prop.name)"
              (ngModelChange)="handleChangeValue($event, prop)" >
              <option *ngFor="let v of prop.EnumValues"
                [value]="v">{{camel2Joiner(v, ' ')}}</option>
            </select>

            <div *ngSwitchCase='StylePropType.ShortEnum'
              class="btn-group"
              btnRadioGroup
              ngDefaultControl
              [name]="prop.name"
              [ngModel]="value(prop.name)"
              (ngModelChange)="handleChangeValue($event, prop)" >
              <ng-container *ngIf="!prop.EnumIcons">
                <label *ngFor="let v of prop.EnumValues"
                  class="btn btn-radio"
                  [btnRadio]="v" tabindex="0" role="button">{{camel2Joiner(v, ' ')}}</label>
              </ng-container>
              <ng-container *ngIf="prop.EnumIcons">
                <label *ngFor="let icon of prop.EnumIcons; index as i"
                  class="btn btn-radio"
                  [ngStyle]="prop.EnumIconStyles ? prop.EnumIconStyles[i] : null"
                  [btnRadio]="prop.EnumValues[i]" tabindex="0" role="button">
                  <i class="material-icons">{{icon}}</i>
                </label>
              </ng-container>
            </div>

            <input *ngSwitchCase='StylePropType.Text'
              type="text"
              [name]="prop.name"
              [id]="prop.name"
              class="form-control"
              [placeholder]="camel2Joiner(prop.name, ' ')"
              [ngModel]="getDisplayValue(prop.name)"
              (ngModelChange)="handleChangeValue($event, prop)">

            <input *ngSwitchCase='StylePropType.Color'
              type="text"
              [name]="prop.name"
              [id]="prop.name"
              class="form-control"
              [placeholder]="camel2Joiner(prop.name, ' ')"
              [ngModel]="getDisplayValue(prop.name)"
              (ngModelChange)="handleChangeValue($event, prop)">

            <input *ngSwitchCase='StylePropType.ScopedNumberWithoutUnit'
              type="number"
              [name]="prop.name"
              [id]="prop.name"
              class="form-control"
              [placeholder]="camel2Joiner(prop.name, ' ')"
              [ngModel]="getDisplayValue(prop.name)"
              (ngModelChange)="handleChangeValue($event, prop)">

            <div *ngSwitchCase='StylePropType.Number'
              class="input-group" >
              <input type="number"
                [name]="prop.name"
                [id]="prop.name"
                class="form-control"
                [placeholder]="camel2Joiner(prop.name, ' ')"
                [ngModel]="getValueNum(prop.name)"
                (ngModelChange)="handleChangeValue($event, prop)">
              <select class="input-group-btn"
                [ngModel]="getValueUnit(prop.name)"
                (ngModelChange)="handleChangeValue($event, prop)">
                <option value="px">px</option>
                <option value="%">%</option>
                <option value="vw">vw</option>
                <option value="vh">vh</option>
                <option value="auto">Auto</option>
              </select>
            </div>
          
            <lib-box-input *ngSwitchCase='StylePropType.BoxInput'
              [propNames]="prop.boxInputProps"
              [values]="getValueNums(prop.boxInputProps)"
              (onChange)="handleChangeValue($event.value, $event.prop)"
              ></lib-box-input>

          </ng-container>
        </div>
        <!-- <small id="positionHelper" class="text-muted">{{prop.helperContent || prop.name}}</small> -->
      </ng-container>
      <!-- TODO: 其他结构 -->
    </div>
    <!-- style props 容器 -->
    <ng-container *ngIf="prop.ifShow && prop.ifShow(getValue)">
      <config-editor
        [getValue]="getValue"
        [propList]="prop.styleProps"
        [configEditorData]="configEditorData"
        (onChangeValue)="handleChangeValue($event.value, $event.prop)" ></config-editor>
        <!-- [computedStyles]="computedStyles" -->
      </ng-container>
  </ng-container>
</div>